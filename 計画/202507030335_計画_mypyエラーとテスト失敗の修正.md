# 計画: mypyエラーとテスト失敗の修正

## 概要
v0.2.0リリース前の最優先タスクとして、mypyエラー3件とテスト失敗2件の修正を行う。

## 現在の状況

### mypyエラー（3件）
1. `config_loader.py:56`: 戻り値の型の不一致
2. `json.py:66`: オブジェクトへのインデックス代入エラー  
3. `json.py:67`: オブジェクトへのインデックス代入エラー

### テスト失敗（2件）
1. `test_cli_import.py::TestMainCLI::test_main_with_threshold_failure`
2. `test_core_simple.py::TestConfigLoader::test_load_from_yaml_file`

## 実行計画

### ステップ1: mypyエラーの修正（推定30分）
1. `config_loader.py:56`の戻り値の型を確認し修正
   - 実際の戻り値と宣言された型の不一致を解消
   
2. `json.py:66-67`のオブジェクトインデックス代入エラーを修正
   - オブジェクトの型定義を確認
   - 適切な型アノテーションまたはコード修正を実施

### ステップ2: テスト失敗の修正（推定45分）
1. `test_main_with_threshold_failure`テストの修正
   - エラー内容を確認
   - しきい値処理のロジックを検証
   - テストまたは実装コードの修正

2. `test_load_from_yaml_file`テストの修正
   - YAMLファイル読み込み処理の確認
   - 依存関係（tomlパッケージ等）の確認
   - テストまたは実装コードの修正

### ステップ3: 検証（推定15分）
1. mypyの再実行で0エラーを確認
2. pytestの再実行で全テスト合格を確認
3. カバレッジが86%以上を維持していることを確認

## 成功基準
- [ ] mypyエラー: 0件
- [ ] pytest: 全182テスト合格
- [ ] カバレッジ: 86%以上維持

## リスクと対策
- **リスク**: 修正により他のテストが失敗する可能性
- **対策**: 各修正後に関連テストを実行し、影響を最小限に抑える

## 次のアクション
修正完了後、以下を実施：
1. Black formatの適用（8ファイル）
2. TestPyPIへのテスト公開
3. 複数環境でのインストールテスト