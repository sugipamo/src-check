# コード品質問題修正依頼

## 作成日時
2025-07-04 13:30

## 概要
コード品質チェックの結果、ruffで18個のエラーが検出されました。主な問題は以下の通りです。

## 検出された問題

### 1. SIM117: ネストされたwith文の問題（16件）
複数のwith文がネストされており、単一のwith文にまとめることが推奨されています。

影響ファイル：
- tests/unit/test_cli_import.py:200
- tests/unit/test_dependency_checker.py:140
- tests/unit/test_license_checker.py: 複数箇所（67, 92, 120, 149, 178, 206, 241, 267, 275, 302, 335, 363, 387, 427）

### 2. F841: 未使用のローカル変数（2件）
割り当てられたが使用されていない変数があります。

影響ファイル：
- tests/unit/test_cli_import.py:258 (`mock_print`)
- tests/unit/test_cli_import.py:273 (`mock_print`)

## 修正方針

### SIM117の修正
複数のコンテキストマネージャーを単一のwith文で使用するように修正します。

```python
# 修正前
with patch.object(Path, "exists", exists_side_effect):
    with patch.object(Path, "is_file", is_file_side_effect):
        # 処理

# 修正後
with patch.object(Path, "exists", exists_side_effect), \
     patch.object(Path, "is_file", is_file_side_effect):
    # 処理
```

### F841の修正
未使用の変数を削除するか、`_`に置き換えます。

```python
# 修正前
) as mock_print, mock.patch("pathlib.Path.exists", return_value=True):

# 修正後
) as _, mock.patch("pathlib.Path.exists", return_value=True):
```

## 優先度
- 高: これらのエラーはコード品質に影響するため、早期の修正が必要です。

## 現在の状況
- pytest: 全182テスト合格（カバレッジ77.91%）
- mypy: エラーなし
- ruff: 18エラー

## 次のステップ
1. 上記のruffエラーを修正
2. 修正後、再度テストを実行して動作確認
3. コミット前の最終確認

---

**作成者**: Claude Code  
**ステータス**: 修正待ち