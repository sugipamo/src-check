# src-check ロードマップ

## 🎯 ビジョン
「pytestのように使いやすく、包括的で信頼性の高いPythonコード品質管理ツール」

## 📅 現在の状況

### ✅ v0.1.0 - Foundation 完了 ✅
- ✅ 基本機能の実装完了
- ✅ 9つのチェッカー実装済み (security, code_quality, architecture, test_quality, documentation, type_hints, performance, dependency, license)
- ✅ CLI統合完了 (src-check, src-check-kpi コマンド)
- ✅ 全106テスト合格、カバレッジ84.13%達成
- ✅ プラグインシステム基盤完成
- ✅ mypyエラー0達成、完全な型安全性確保

## 🚀 次期リリース計画

### v0.2.0 - Functional (2週間後)
**テーマ**: 実用的なツールに

#### ✅ コード品質の最終調整（完了）✅
- [x] Blackフォーマットの適用 (4ファイル: type_hints.py, documentation.py, test_type_hint_checker.py, test_documentation_checker.py) ✅
- [x] pyproject.tomlのRuff設定更新 (lintセクションへ移行済み) ✅
- [x] 型スタブのインストール (types-PyYAML, types-toml) ✅
- [x] mypyエラーの修正 (33エラー、9ファイル) ✅

#### ✅ 追加チェッカーの実装 (10種類に拡張) ✅
- [x] DocumentationChecker (docstring品質チェック) ✅
- [x] PerformanceChecker (パフォーマンス問題検出) ✅
- [x] DependencyChecker (依存関係の健全性チェック) ✅
- [x] LicenseChecker (ライセンス整合性チェック) ✅
- [x] DeprecationChecker (廃止予定機能の使用検出) ✅
- [x] TypeHintChecker (型ヒントの充実度チェック) ✅

#### ✅ ドキュメント整備 ✅
- [x] README.mdに実際に動く使用例を追加 ✅
- [x] 各チェッカーの詳細ドキュメント ✅
- [x] CI/CD統合ガイドの作成 ✅

#### パフォーマンス最適化
- [ ] 1000行のプロジェクトを10秒以内で処理
- [ ] パフォーマンス基準値の設定

### v0.3.0 - Quality (4週間後)
**テーマ**: 品質と信頼性
- [ ] 15種類のチェッカー実装
- [ ] 自動修正機能（基本）
  - [ ] import文の自動整理
  - [ ] 未使用コードの自動削除
  - [ ] 簡単なフォーマット修正
- [ ] エラーリカバリー強化
- [ ] 85%以上のテストカバレッジ維持

### v0.4.0 - Performance (6週間後)
**テーマ**: スケーラビリティ
- [ ] 並列処理実装
- [ ] キャッシュシステム
- [ ] 大規模プロジェクト対応
- [ ] メモリ使用量最適化
- [ ] 1000ファイルを5秒以内で処理

### v1.0.0 - Production (10週間後)
**テーマ**: 本番環境対応
- [ ] 20+種類のチェッカー
- [ ] 完全な自動修正機能
- [ ] プラグインAPI公開
- [ ] 包括的ドキュメント
- [ ] PyPIでの公開

## 📊 品質指標

### 現在の状況
- テストカバレッジ: 84.13% ✅
- テスト数: 106 (全て合格) ✅
- チェッカー数: 10/10 実装済み ✅
- ドキュメント化率: 約70%
- 型アノテーション: 100% ✅ (mypyエラー0)
- コードフォーマット: Black適用済み ✅
- 実行速度: 3.10秒で全テスト完了 ✅

### 目標値
- テストカバレッジ: 85%以上を維持
- ドキュメント化率: 100%
- 型アノテーション: 100%
- パフォーマンス: 現在の2倍以上

## 🔍 現在の課題と対応

### ✅ 完了タスク ✅
- [x] DeprecationCheckerの実装（v0.2.0最後のチェッカー） ✅ (完了: 2025-07-02)
- [x] ドキュメント整備（README.md、各チェッカーの詳細ドキュメント） ✅
- [x] CI/CD統合ガイドの作成 ✅

### 残タスク
- [ ] パフォーマンス最適化（1000行のプロジェクトを10秒以内で処理）




## 📈 成功指標

### 技術指標
- バグ報告: < 5件/月
- ビルド成功率: > 99%
- リリースサイクル: 2週間

### コミュニティ指標
- GitHub Stars: 0 → 100 → 500
- 月間ダウンロード: 0 → 1000 → 10000
- 採用プロジェクト: 0 → 10 → 50

## 🎨 将来の展望

### v2.0以降
- Web UI/ダッシュボード
- VS Code拡張機能
- 他言語サポート（JavaScript等）
- AIベースの修正提案
- チーム向け品質メトリクス

### エコシステム構築
- プラグインマーケットプレイス
- ベストプラクティス共有
- 業界別ルールセット
- エンタープライズサポート

## 🔧 追加検討事項

### CI/CD統合
- GitHub Actions設定テンプレート
- GitLab CI設定テンプレート
- pre-commitフック設定
- 自動PR品質チェック

### 設定ファイル対応
- .src-check.yaml設定ファイルのサポート
- 除外パターンの設定
- カスタムルールの設定
- チーム共有設定の仕組み

## 📝 直近の実装タスク

### 実装済みチェッカー (10種類)
1. ✅ SecurityChecker - セキュリティ脆弱性の検出
2. ✅ CodeQualityChecker - コード品質の問題検出
3. ✅ ArchitectureChecker - アーキテクチャ問題の検出
4. ✅ TestQualityChecker - テスト品質の評価
5. ✅ DocumentationChecker - ドキュメント品質チェック
6. ✅ TypeHintChecker - 型ヒントの充実度チェック
7. ✅ PerformanceChecker - パフォーマンス問題検出
8. ✅ DependencyChecker - 依存関係の健全性チェック
9. ✅ LicenseChecker - ライセンス整合性チェック
10. ✅ DeprecationChecker - 廃止予定機能の使用検出

### CLI統合状況
- ✅ src-check: メインコマンド実装完了
- ✅ src-check-kpi: KPIスコア計算コマンド実装完了
- ✅ 全106テスト合格、カバレッジ84.13%達成

### PerformanceChecker実装詳細
- ✅ ループ内での不変式検出
- ✅ 文字列結合の非効率性検出
- ✅ 不要な型変換の検出
- ✅ ループ不変な関数呼び出しの検出
- ✅ 深くネストされた内包表記の検出
- ✅ 13種類のテストケース実装
- ✅ 8種類のパフォーマンス問題パターン検出 (PERF001-PERF008)

### DependencyChecker実装詳細
- ✅ 循環依存の検出 (DEP001)
- ✅ 未使用の依存関係の検出 (DEP002)
- ✅ バージョン未指定の依存関係検出 (DEP006)
- ✅ 開発/本番依存の混在検出 (DEP007)
- ✅ requirements.txtとpyproject.tomlの解析
- ✅ importlib.metadataを使用した高度な依存関係解析
- ✅ 12種類のテストケース実装
- ✅ パッケージ名マッピング対応 (PIL→pillow等)

### LicenseChecker実装詳細
- ✅ LICENSEファイルの検出と解析
- ✅ MIT、Apache 2.0、GPL等の主要ライセンス検出
- ✅ pyproject.tomlとの整合性チェック
- ✅ コピーライトヘッダーの検証
- ✅ 依存関係のライセンス互換性チェック
- ✅ 11種類のテストケース実装
- ✅ 6種類のライセンス問題パターン検出 (LIC001-LIC006)

### DeprecationChecker実装詳細
- ✅ Python標準ライブラリの廃止予定モジュール検出 (imp, asyncore等)
- ✅ collectionsの古いAPI検出 (MutableMapping等→collections.abc)
- ✅ %演算子による文字列フォーマットの検出 (f-string推奨)
- ✅ asyncioの古いAPI検出 (ensure_future→create_task)
- ✅ Python 3.9+でのtyping古い書き方検出 (List→list等)
- ✅ from module import *の検出
- ✅ 11種類のテストケース実装
- ✅ 6種類の廃止予定パターン検出 (DEPR001-DEPR006)

---

## 🎯 次のステップ（優先順位順）

### 1. v0.2.0 リリースタスク
- [ ] パフォーマンス最適化（ベンチマーク実施）
- [ ] PyPIへのパッケージ公開準備
- [ ] リリースノート作成

### ✅ 2. ドキュメント整備（ユーザビリティ向上） ✅
- [x] README.mdの充実 ✅
  - インストール手順の明確化 ✅
  - 実際に動く使用例の追加 ✅
  - 各チェッカーの説明と出力例 ✅
- [x] 各チェッカーの詳細ドキュメント作成 ✅
- [x] CI/CD統合ガイドの作成 ✅

### 3. パフォーマンス最適化
- [ ] 大規模プロジェクトでのベンチマーク実施
- [ ] ボトルネックの特定と最適化
- [ ] キャッシュメカニズムの検討

### 4. 自動修正機能の基本実装（v0.3.0準備）
- [ ] 修正可能な問題の特定
- [ ] 自動修正フレームワークの設計
- [ ] 最初の自動修正機能の実装（例：未使用import削除）

### 🔄 最近の進捗

#### 2025-07-02 完了項目

##### チェッカー実装（全10種類完了）✅
- ✅ LicenseChecker実装完了
  - MITライセンス検出機能
  - pyproject.tomlとの整合性チェック
  - コピーライトヘッダー検証
  - 依存関係のライセンス互換性チェック
- ✅ DeprecationChecker実装完了
  - DEPR001-DEPR006の6種類の検出パターン実装
  - Python標準ライブラリの廃止予定機能検出
  - typingモジュールの古い書き方検出（Python 3.9+）
  - 文字列フォーマットの古い書き方検出
- ✅ 全106テスト合格達成
- ✅ カバレッジ84.13%達成（目標の70%を大幅に超過）

---

更新日: 2025-07-02 19:20

---

## 🗓️ v0.2.0 完成状況

### ✅ 技術的実装完了項目
- ✅ 全て10種類のチェッカー実装完了
- ✅ CLI統合完了 (src-check, src-check-kpi)
- ✅ 全106テスト合格
- ✅ カバレッジ84.13%達成
- ✅ mypyエラー0達成
- ✅ Blackフォーマット適用済み

### ✅ v0.2.0リリース前の完了タスク ✅
- [x] README.mdの充実（高優先度） ✅
  - 実際に動作する使用例の追加 ✅
  - 各チェッカーの説明と出力例 ✅
  - インストール手順の明確化 ✅
- [x] 各チェッカーの詳細ドキュメント作成 ✅
- [x] CI/CD統合ガイドの作成 ✅

### 📋 v0.2.0リリース後の残タスク
- [ ] パフォーマンス最適化（ベンチマーク実施）

### プロジェクト状態確認結果 (2025-07-02)
- ✅ チェッカー実装: 10/10 完了
- ✅ CLIコマンド: 2/2 動作確認
- ✅ テスト: 106/106 合格 (2 skipped)
- ✅ カバレッジ: 84.13% (目標70%を大幅に超過)
- ✅ バージョン: pyproject.tomlは0.2.0に修正済み

## 🆕 新規確認事項（2025-07-02）

### 📋 プロジェクト整合性確認結果
- ✅ 10種類のチェッカー実装確認
- ✅ CLIコマンド (src-check, src-check-kpi) 動作確認
- ✅ テストカバレッジ84.13%（目標超過）
- ✅ 計画フォルダ内の完了タスク整理済み

### 🛠️ 追加確認が必要なタスク
- [x] pyproject.tomlのバージョンをv0.2.0に修正 ✅
- [ ] プラグインシステムの実装状況確認（レジストリが部分実装）
- [x] types-PyYAML, types-tomlの依存関係への追加 ✅
- [ ] プロジェクトURLの更新（現在はプレースホルダー）

