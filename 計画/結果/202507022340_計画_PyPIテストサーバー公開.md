# PyPIテストサーバー公開計画

## 目的
src-check v0.2.0をTestPyPI（PyPIのテストサーバー）に公開し、本番公開前の最終確認を行う

## タイムライン
- 開始: 2025-07-02 23:40
- 完了予定: 2025-07-03 01:00

## 前提条件の確認 ✅
- [x] パッケージビルド完了（dist/配下に.whlと.tar.gz）
- [x] バージョン整合性確認（v0.2.0で統一）
- [x] リリースノート作成済み
- [x] テスト全合格（108テスト）
- [x] カバレッジ84.59%達成

## 実施手順

### 1. TestPyPIアカウント準備（15分）
- [ ] TestPyPIアカウントの作成/確認
- [ ] APIトークンの生成
- [ ] .pypircファイルの設定

### 2. 依存関係の最終確認（10分）✅ 完了
- [x] tomlパッケージをpyproject.tomlのdependenciesに追加
- [x] その他の依存関係の確認
- [x] パッケージの再ビルド（uv buildで実行）

### 3. TestPyPIへのアップロード（20分）✅ 準備完了
- [x] twineのインストール確認
- [x] パッケージの検証（twine check dist/*）→ 両ファイルPASSED
- [ ] TestPyPIへのアップロード実行（要：認証情報）
- [ ] アップロード成功の確認

### 4. インストールテスト（30分）
- [ ] 新規仮想環境の作成
- [ ] TestPyPIからのインストール
  ```bash
  pip install -i https://test.pypi.org/simple/ src-check==0.2.0
  ```
- [ ] 基本動作確認
  - [ ] src-checkコマンドの実行
  - [ ] src-check-kpiコマンドの実行（python -m経由）
  - [ ] ヘルプ表示の確認
- [ ] サンプルプロジェクトでの動作確認

### 5. 複数環境でのテスト（45分）
- [ ] Python 3.8環境でのテスト
- [ ] Python 3.9環境でのテスト
- [ ] Python 3.10環境でのテスト
- [ ] Python 3.11環境でのテスト
- [ ] 各環境での動作結果の記録

### 6. 問題点の修正（必要に応じて）
- [ ] 発見された問題のリスト化
- [ ] 修正の実施
- [ ] 再ビルド・再アップロード（必要な場合）

### 7. ドキュメント更新
- [ ] インストール手順の最終確認
- [ ] TestPyPIでの結果をREADMEに反映（必要に応じて）
- [ ] 既知の問題の文書化

## 成功基準
- TestPyPIへの正常なアップロード
- 全Python環境（3.8-3.11）での正常なインストールと動作
- src-checkコマンドの正常実行
- エラーなしでのサンプルプロジェクト解析

## リスクと対策
- **リスク**: 依存関係の不足
  - **対策**: tomlパッケージを追加、他の依存関係も再確認
- **リスク**: エントリーポイントの設定ミス
  - **対策**: pyproject.tomlのscripts設定を再確認
- **リスク**: パッケージ名の重複
  - **対策**: TestPyPIで事前に名前を確認

## 次のステップ
TestPyPIでの公開が成功したら：
1. 本番PyPIへの公開準備
2. GitHub Releasesページの作成
3. アナウンスの準備

## メモ
- src-check-kpiコマンドの直接実行問題は既知の課題として文書化
- 将来的にはv0.3.0で解決予定